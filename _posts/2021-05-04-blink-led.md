# Blink Led (Arduino)
> Realizado por José María Amusquívar Poppe, Fabián Alfonso Beirutti Pérez y Prashant Jeswani Tejwani

Índice del contenido:

1. TOC
{:toc}

## Introducción
Se programa un Arduino de manera que se genere una pulsación de frecuencia variable en el LED integrado en la placa. 
Se produce una señal senoidal que define la envolvente, de manera que cuando dicha señal alcance su valor máximo el  LED  parpadeará  a  unacierta frecuenciafreqMax, mientras que cuando alcance el valor mínimo parpadeará a unafrecuencia mínimafreqMin:

* Se describe el trabajo realizado argumentando las decisiones adoptadas para la solución propuesta
* Se incluye las referencias y herramientas utilizadas
* Se muestra el resultado con un gif animado

## Diseño 

El diseño ha sido el que se puede observar en la siguiente figura. Se representa una figura del corazón humano el cual al hacer click, simula un latido del corazón. Para que el latido sea sequencial, se debe dejar el botón del ratón apretado.

![](/My-Processing-Book/images/blink_led/blink_led.PNG "Diseño del programa en Arduino")

## Código implementado

A continuación se describe el trabajo realizado. Se crean e inicializan las variables necesarias.

    PShader shader;
    

<br>En la función **setup()** se inicializan las variables definidas anteriormente, y se carga el shader de fragmento y vértice. Además, el objeto del corazón rescalado:  

    void setup() {
      
    
<br>En la función **draw()** se muestra u oculta el menú si el usuario ha pulsado la tecla 'h'. Sino, se pasa el tiempo desde que se ha cargado el shade, se detecta si ha habido un click para activar el shader cargando el shader mediante la función **shader(s)**. Luego, se establece las luces direccionales y se dibuja la figura mediante la función **shape(s)**.

    void draw() {
      

<br>Si la variable *help* es verdadera, se imprime un lienzo de ayuda de los controles que dispone el usuario:

![](/My-Processing-Book/images/blink_led/menu.PNG "Diseño del menú")
    
<br>La función **keyPressed()** detecta cuando el usuario presiona la tecla 'h' mostrar u ocultar el menú.
      
    void keyPressed() {
      if (key == 'h') help = !help;
    }

<br>El shader de fragmentos cargado es el siguiente. Los *uniform* y *varying* son definidos con sus correspondientes tipos, al principio del código. EL shader se encarga de establecer la intensidad del color de la luz sobre el corazón. 

    #ifdef GL_ES
    
    
<br>El shader de vértices cargado es el siguiente. Los *uniform*, *attribute* y *varying* son definidos con sus correspondientes tipos, al principio del código. El shader se encarga de simular el latido del corazón calculando la nueva posición mediante la variable *newPosition*.

    uniform mat4 transform;
    
      
<br>A continuación, se muestra el resultado final mediante un gif animado: 

![](/My-Processing-Book/images/blink_led/blink-led-demo.gif "Prueba del código en vivo")

## Descargar código en Processing
Para la correcta ejecución en Processing, es necesario instalar el modo Shader. Esto se puede hacer de la siguiente manera:

![](/My-Processing-Book/images/blink_led/.gif  "Instalación del modo Shader en Processing")

Para descargar el código en Processing, acceda a: <a href="https://downgit.github.io/#/home?url=https://github.com/Prashant-JT/My-Processing-Book/tree/master/projects/shaders_2">Descargar código en Processing</a> o acceda a la carpeta del repositorio del proyecto en: <a href="https://github.com/Prashant-JT/My-Processing-Book/tree/master/projects/shaders_2">Repositorio del proyecto</a>

---

## Referencias

[Guión de prácticas](https://ncvt-aep.ulpgc.es/cv/ulpgctp21/pluginfile.php/412240/mod_resource/content/37/CIU_Pr_cticas.pdf)

[Página de Processing](https://processing.org/examples/)

[Creación del enlace de descarga](https://downgit.github.io/#/home)

[Objetos .obj](https://open3dmodel.com/)
